# BW-Playwright

## Contents

- [How-To](#how-to)
  - [First Time Setup](#first-time-setup)
  - [Run Tests](#run-tests)
    - [Environment Variables](#environment-variables)
- [Reporting](#reporting)
- [Improvement Ideas](#improvement-ideas)
- [Useful Links](#useful-links)

**Brief**

This project contains a possible solution to "qa-expert-task-3" practical challenge.

The project is based on Playwright, extended with Cucumber.

The project covers https://qa-assessment.pages.dev/ with test scenarios.

The project was set up the following way:

- Initialization of a playwright@latest project via npm
- Installation of Cucumber as dependency, integration with playwright (to favor BDD)
- Addition of customizations (to increase productivity):
  - Page Object Model implementation
  - Test Data management

**For the purposes of the challenge find the [actual test report here](./doc/test-report.md).**

## How-To

Walkthrough for setting up the project for local development and testing. For framework related topics see subsequent chapters.

üîù [Jump to Contents](#contents)

### First Time Setup

**Requirements**

- git >=2.43.0
- npm >=10.7.0
- node >=v18.20.4

**OS**

- **Linux**: Developed on and fully supported on Ubuntu 22.04 or later.
- **Windows**: Confirmed to work on Windows 10
- **Mac OS**: Unknown, potentially fully supported

**Steps**

1. Clone this project to your workstation from Github. During this you may have to authenticate with your Github account:

````bash
mkdir -p ~/workspace;
cd ~/workspace
git clone https://github.com/goobemaster/bw-playwright.git bw-playwright
````

_Alternatively:_ Initialize an empty repository, then add the remote origin.

2. Install dependencies

To successfully install all dependencies (--with-deps) super user access is required, as it involves installing system packages.

````bash
npm install
npx playwright install --with-deps
````

**IDE**

The suggested development environment for this project is [Visual Studio Code](https://code.visualstudio.com/). _The readme assumes this choice._

- [Cucumber extension](https://marketplace.visualstudio.com/items?itemName=CucumberOpen.cucumber-official)
- [Playwright Test for VSCode extension](https://marketplace.visualstudio.com/items?itemName=ms-playwright.playwright)

If you need more advanced features, a great alternative to explore is [Webstorm](https://www.jetbrains.com/webstorm/).

_For fully automated use cases or just test runs an IDE is not necessary._

üîù [Jump to Contents](#contents)

### Run Tests

To run all feature files without any filtering, simply run the included test-run-all.sh script:

````bash
cd ~/workspace/bw-playwright

./test-run-all.sh
````

#### Environment Variables

A set of environment variables inside the included test runner script are used as settings:

| Name                  | Description                                                                | Options                           |
|-----------------------|----------------------------------------------------------------------------|-----------------------------------|
| **BROWSER**           | Tests will execute on this browser.                                        | "chromium" *, "firefox", "webkit" |
| **BROWSER_HEADLESS**  | The browser will run entirely in memory, without bringing up a GUI.        | "true", "false" *                 |
| **BROWSER_AUTOCLOSE** | If set to true, the browser will be closed when end of testing is reached. | "true", "false" *                 |

Environment variables are optional. If ommitted the default value will be used.

_* - marks default option_

üîù [Jump to Contents](#contents)

## Reporting

Each test run generates three kind of reports. One is a quick summary in the terminal, which includes test failures and errors if any. 100% pass results in a very brief output:

[![Console output](/doc/test-run-all-console.jpg "Cucumber test run console output")](./doc/test-run-all-console.jpg)

The second report is the "./cucumber-report.html" file generated by cucumber:

[![HTML report](/doc/test-run-all-html.jpg "Cucumber test run HTML report")](./doc/test-run-all-html.jpg)

The third report is the "./cucumber-report.json" file, which may be used for programmatically inspect and process the results:

[![JSON report](/doc/test-run-all-json.jpg "Cucumber test run JSON report")](./doc/test-run-all-json.jpg)

üîù [Jump to Contents](#contents)

## Improvement Ideas

List of "If I had infinite time available" items:

- Environment variables could be moved to a .env file (experimental support in node 20+)
- The element register (locators) inside pages should be more robust.
- The cucumber After hook is flaky sometimes. This should be investigated.

## Useful Links

- [Playwright Docs](https://playwright.dev/docs/test-assertions)
- [Playwright API](https://playwright.dev/docs/api/class-browser)
- [Cucumber Reference](https://cucumber.io/docs/cucumber/api)
- [NPM packages](https://www.npmjs.com/)
- [Playwright Cucumber Basic Setup](https://dev.to/akdevcraft/playwright-and-cucumber-are-the-best-tools-for-end-to-end-testing-a28)
- [Playwright Cucumber Guide](https://www.browserstack.com/guide/playwright-cucumber)
- [Playwright waiting for load state](https://webscrapingsite.com/blog/how-to-wait-for-page-to-fully-load-in-playwright/)

üîù [Jump to Contents](#contents)